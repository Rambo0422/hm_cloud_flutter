<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>鼠标控制</title>
</head>
<body>
<!--    <h1>监听鼠标移动事件</h1>-->

<!--    <div id="output">鼠标坐标：(0, 0)</div>-->
    
<!--    <h1>监听鼠标点击事件</h1>-->

<!--    <div id="output1">点击事件：未触发</div>-->
    <script>

        // 处理鼠标点击事件
        function handleMouseDown(event) {
            // 获取第一个触摸点的坐标
            var x = event.clientX;
            var y = event.clientY;
            var button = event.button;


            // 确定点击的按钮
            var buttonName;
            switch (button) {
                case 0:
                    buttonName = '左键';
                    break;
                case 1:
                    buttonName = '滚轮按钮';
                    break;
                case 2:
                    buttonName = '右键';
                    break;
                default:
                    buttonName = '未知';
            }


            // 更新输出元素显示点击事件信息
           // document.getElementById('output1').innerText = '点击事件down：(' + x + ', ' + y + ')，按钮：' + buttonName;

            // 发送鼠标点击事件数据到Objective-C
            sendMouseClickDownData(x, y, button);
        }
        
        function handleMouseUp(event) {
            // 获取第一个触摸点的坐标
            var x = event.clientX;
            var y = event.clientY;
            var button = event.button;

            // 确定点击的按钮
            var buttonName;
            switch (button) {
                case 0:
                    buttonName = '左键';
                    break;
                case 1:
                    buttonName = '滚轮按钮';
                    break;
                case 2:
                    buttonName = '右键';
                    break;
                default:
                    buttonName = '未知';
            }


            // 更新输出元素显示点击事件信息
           // document.getElementById('output1').innerText = '点击事件up：(' + x + ', ' + y + ')，按钮：' + buttonName;

            // 发送鼠标点击事件数据到Objective-C
            sendMouseClickUpData(x, y, button);
        }
        
        function handleTouchWheel(event) {
            // 获取第一个触摸点的坐标
            var x = event.deltaX;
            var y = event.deltaY;

            sendMouseWheel(x, y);
        }
        
        function handleTouchStart(event){
            event.preventDefault();
            // 获取第一个触摸点的坐标
            var touch = event.touches[0];
            var touchX = touch.clientX;
            var touchY = touch.clientY;
            sendTouchStart(touchX,touchY);
        }
        
        function handleTouchEnd(event){
           event.preventDefault();
            // 获取第一个触摸点的坐标
            var touchX = event.changedTouches[0].pageX;
            var touchY = event.changedTouches[0].pageY;
            sendTouchEnd(touchX,touchY);
        }

        // 处理鼠标移动事件
        function handleMousemove(event) {
            // 获取鼠标坐标
            var x = event.clientX;
            var y = event.clientY;

            // 更新输出元素显示鼠标坐标
            //document.getElementById('output').innerText = '鼠标坐标：(' + x + ', ' + y + ')';

            // 发送鼠标数据到Objective-C
            sendMouseData(x, y);
        }
        
        function sendMouseClickDownData(x, y, button) {
            window.webkit.messageHandlers.mouseclickdown.postMessage({ x: x, y: y, button: button });
        }

        function sendMouseClickUpData(x, y, button) {
            window.webkit.messageHandlers.mouseclickup.postMessage({ x: x, y: y, button: button });
        }

        // 发送鼠标移动事件数据到Objective-C
        function sendMouseData(x, y) {
            window.webkit.messageHandlers.mousemove.postMessage({ x: x, y: y });
        }

        function sendMouseWheel(x, y) {
            window.webkit.messageHandlers.wheel.postMessage({ x: x, y: y });
        }
        
        function sendTouchStart(x, y) {
            window.webkit.messageHandlers.touchstart.postMessage({ x: x, y: y });
        }
        
        function sendTouchEnd(x, y) {
            window.webkit.messageHandlers.touchEndHandler.postMessage({ x: x, y: y });
        }

        // 添加鼠标移动事件监听器
        document.addEventListener('mousemove', handleMousemove);
        // 添加鼠标点击事件监听器
        document.addEventListener('mousedown', handleMouseDown);
        document.addEventListener('mouseup', handleMouseUp);
        //添加鼠标滚轮事件监听器
        document.addEventListener('wheel', handleTouchWheel);
        //添加触摸事件监听器
        document.addEventListener('touchstart', handleTouchStart);
        document.addEventListener('touchend', handleTouchEnd);


    </script>

</body>
</html>
